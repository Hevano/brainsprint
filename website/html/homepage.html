<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Homepage - BrainSprint</title>
    <link rel="icon" href="../images/brain.png">
    <link rel="stylesheet" href="../css/brain_style.css">
    <link rel="stylesheet" href="../css/homepage_style.css">
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script type="text/javascript" src="../js/setup-firebase.js"></script> 
    <script src="../js/jquery-3.3.1.js"></script>
</head>
<body>
    <div id="div_pagewrap">
        <div id="div_head">
            <button id="button_gettingStarted" class="button_style">Getting Started</button>
        </div>
        <div id="div_body">
            <div id="div_brainsprintLogo">
                <img src="../images/brain.png" alt="The brainsprint logo"/>
            </div>
            <div id="div_brainsprintText">
                <h1>BrainSprint</h1>
            </div>
        </div>
        <div id="div_footer">
            <div id="div_roomButtons">
                <button id="button_enter" onclick="join_room_pop()" class="button_style">Enter a Room</button>
                <a href="./login.html"><button id="button_create" class="button_style">Create a Room</button></a>
            </div>
        </div>
    </div>

    <!-- Join Room Popup -->
    <div class="join_room_popup">
        <!-- Join Room Popup Content -->
        <div class="join_room_popup_content">
          <span class="close" onclick="close_pop()">&times;</span>
          <form class="form_join_room">
            <!-- <legend>Enter Room Number</legend> -->
            <input id="input_name" type="text" name="name" placeholder="Enter Your Name"/>
            <input id="input_number" type="text" name="join_number" placeholder="Enter Room Number"/>
            <button id="join_button" onclick="send_activity();return false">Submit</button>
          </form>
        </div>
      </div>
    </div>
    
    <script>
        // Join Room Pop Up Functions
        var join_room = $(".join_room_popup");
        var span = document.getElementsByClassName("close")[0];
    
        // Closes Join Room Popup
        function close_pop() {
          join_room.css("display", "none");
          console.log("close function");
        }
    
        // Brings up Join Room Popup
        function join_room_pop() {
          join_room.css("display", "block");
          console.log("join room function");
        }

        // Send the user to a room with their room code and name
        myStorage = window.localStorage;

        function send_activity() {
            var test = null;
            var room = database.ref().child("roomList").child($("#input_number").val());
            console.log(room);
            room.on('value', snap => test = snap.val());

            

           
            
            if(test != null ) {
              myStorage.setItem("name",$("#input_name").val());
              myStorage.setItem("roomCode",$("#input_number").val());
              window.location.href = "activity.html";
              console.log("doot")
            } else {
                console.log("Room does not exist")
            }
            /*
             */
        };

        function check_creds() {

        }
    
    </script>

</body>
</html>
