<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Create - Brainsprint</title>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="../css/brain_style.css">
        <link rel="stylesheet" href="../css/create_style.css">
        <link rel="icon" href="../images/brain.png">
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
        <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
        <script type="text/javascript" src="../js/setup-firebase.js"></script>  
        <script src="../js/jquery-3.3.1.js"></script>
    </head>
    <body>
      <div class="pagewrap">
        <div id="div_head">

          <div id="div_logo_bar">

            <div id="div_logo">
              <a href="dashboard.html"><img src="../images/brain.png" alt="brain_logo" id="brain_logo"></a>
              <h1 id="brain_name">BrainSprint</h1>
              <img src="../images/profile_icon.png" alt="profile_icon" id="profile_icon">
            </div>

            <div class="div_profile">

            </div>

          </div>

          <div id="div_nav_bar">
            <a id="nav_dashboard" class="nav_options" href="dashboard.html">Dashboard</a>
            <a id="nav_logout" class="nav_options"  href="homepage.html">Log Out</a>
            <a id="nav_help" class="nav_options"  href="help.html">Help </a>
          </div>
        </div>

        <div id='div_create'>
          <div id="div_pagename">
            <h1 id="pagename">Create a Room</h1>
          </div>
          <div id='div_form'>
            <form class="create_form">
              <fieldset class="title_form">
                <input type="text" id="room_name" name="name" placeholder="Room Name" required="required"> <span class="tooltip"><abbr title="The name of the room that you will create">?</abbr></span>
              </fieldset>

              <br>

              <fieldset class="topic">
                <input type="text" name="topic1" placeholder="Topic Title" required="required" class="topic_name"> <span class="tooltip"><abbr title="A topic that you will be brainstorming on">?</abbr></span>
                <br>
                <label class="time_select">Topic Duration:</label>
                <select size="1" name="time" id="time" class="time_select">
                  <option value="30" selected="selected">30 seconds</option>
                  <option value="60">1 minute</option>
                  <option value="120">2 minutes</option>
                  <option value="180">3 minutes</option>
                  <option value="240">4 minutes</option>
                  <option value="320">5 minutes</option>
                </select> <span class="tooltip" id="trash_tool"><abbr title="The amount of time that brain sprinters can reply to a topic">?</abbr></span>
                <input type="button" id="delete1" name="delete1" value="Trash" class="trash_button"/> <span class="tooltip"><abbr title="This button deletes this topic">?</abbr></span>
              </fieldset>
              <br>
              <input type="button" name="new" value="Add more topics" class="create_input"> <span class="tooltip"><abbr title="The amount of time that brain sprinters can reply to a topic">?</abbr></span>
              <input type="button" id="reset" name="reset" value="Reset" class="button_final"/> <span class="tooltip"><abbr title="This button clears all of the information you have added in the area above">?</abbr></span>
              <input type="button" onclick="createActivity()" id="create" name="create" value="Create" class="button_final"/> <span class="tooltip"><abbr title="This button saves the information you have put in and creates your room">?</abbr></span>

            </form>
          </div>
        </div>
        <div class="bottom">
          <div class="bottom_bar">

          </div>
        </div>
      </div>

      <script type="text/javascript">
          /*<![CDATA[*/
          function createActivity() {
            var roomName = document.getElementById("room_name");
            var prompts;
            $(".topic").each(function() {
              prompts += {
                "topic": $(this).find(".topic_name").value,
                "time" : $(this).find(".time_select").value
            };
            });
            // A post entry.
            var postData = {
              "title": roomName.value,
              "prompts": prompts
            };

            database.ref().child('roomList').push().set(postData);
            console.log("updated database!");

            // Write the new post's data simultaneously in the posts list and the user's post list.
            /**var updates = {};
            updates['/roomList/' + newPostKey] = postData;

            return firebase.database().ref().update(updates); **/
          }
        /*]]>*/
      </script>
    </body>
</html>
